"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[586],{7840:function(b,j,r){r.r(j),r.d(j,{default:function(){return Z}});var P=r(5574),C=r.n(P),B={input:"input___Vca9h"},t=r(5893);function G(i){var d=i.value,n=i.onChange,l=i.placeholder,e=function(s){n&&n(s.target.value)};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("input",{value:d,onChange:e,className:B.input,placeholder:l})})}var c=r(7294),v={wrap:"wrap____RwWd",outer:"outer___zXLOF",inner:"inner___FI5aq",process:"process___e28mm"},h=100,x=0;function F(i){var d=i.value,n=(0,c.useMemo)(function(){var s=d;s=Math.min(s,h),s=Math.max(s,x);var u=s+"%";return[{width:u},u]},[d]),l=C()(n,2),e=l[0],a=l[1];return(0,t.jsxs)("div",{className:v.wrap,children:[(0,t.jsx)("div",{className:v.outer,children:(0,t.jsx)("div",{className:v.inner,style:e})}),(0,t.jsx)("div",{className:v.process,children:a})]})}var L=r(7484),E=r.n(L),o={item:"item___eA0OK",header:"header___DbH8D",title:"title___iNPeL",plus:"plus___QcRXT",close:"close___PDYJM",process:"process___PNO4c",status:"status___IxI10"},R=r(1039),U=r(7857),y=r.n(U),Y=r(2444),N=r.n(Y),W=r(2004),S=r.n(W),X=r(1996),g=r.n(X),k=r(6037),T=r.n(k),p={PNEDING:"pending",ONGOING:"Ongoing",SUCCESS:"success"},z=r(5098),M=r.n(z),K=r(9783),D=r.n(K),I=r(9520),Q=function(i){g()(n,i);var d=T()(n);function n(l,e,a){var s;return N()(this,n),s=d.call(this,l),D()(M()(s),"items",void 0),D()(M()(s),"db",void 0),s.db=new I.default(l),s.db.version(e).stores(a),s}return S()(n,[{key:"add",value:function(e){return e.createGMT=new Date().getTime(),this.db.items.add(e)}},{key:"queryAll",value:function(){return this.db.items.toArray()}},{key:"query",value:function(e,a){return a?this.db.items.where(e).between(a).toArray():this.db.items.where(e).toArray()}},{key:"update",value:function(e,a){this.db.items.update(e,a)}},{key:"deleteItem",value:function(e){return this.db.items.delete(e)}}]),n}(I.default),J=function(i){g()(n,i);var d=T()(n);function n(l,e,a){return N()(this,n),d.call(this,l,e,a)}return S()(n,[{key:"updateProcess",value:function(e,a){var s=a.process,u=p.PNEDING;s>=h?u=p.SUCCESS:s>x&&(u=p.ONGOING),this.update(e,y()(y()({},a),{},{status:u}))}}]),n}(Q),m=new J("todoList",1,{items:"++id,title,createGMT,process,status"});function H(){var i=(0,R.useLiveQuery)(function(){return m.queryAll()})||[],d=function(a){return E()(a).format("YYYY-MM-DD hh:mm:ss")},n=function(a,s){s+=10,s=Math.min(h,s),s=Math.max(x,s),m.updateProcess(a,{process:s})},l=function(a){m.deleteItem(a)};return(0,t.jsx)("div",{children:(0,t.jsx)("ul",{children:i.length?i.map(function(e){return(0,t.jsxs)("li",{className:o.item,children:[(0,t.jsxs)("div",{className:o.header,children:[(0,t.jsxs)("div",{className:o.title,children:[e.title,e.process!==h?(0,t.jsx)("i",{className:o.plus,onClick:function(){return n(e.id,e.process)},children:"\u8FDB\u5EA6+10"}):null]}),(0,t.jsx)("div",{className:o.close,onClick:function(){return l(e.id)},children:"X"})]}),(0,t.jsx)("div",{className:o.process,children:(0,t.jsx)(F,{value:e.process})}),(0,t.jsxs)("div",{className:o.status,children:[(0,t.jsx)("div",{children:e.status}),(0,t.jsx)("div",{children:d(e.createGMT)})]})]},e.id)}):"null"})})}var V=(0,c.memo)(H),A={listWrap:"listWrap___ygpcp",filterBar:"filterBar___vijkq"},O={wrap:"wrap___KPKUv",text:"text___RJQ5y"};function $(i){var d=i.text,n=i.onClick,l=i.children,e=i.type,a=e===void 0?"button":e,s=function(){n&&n()},u=l||d;return(0,t.jsx)(t.Fragment,{children:a==="text"?(0,t.jsx)("span",{className:O.text,onClick:n,children:u}):(0,t.jsx)("button",{className:O.wrap,onClick:n,children:u})})}var f=(0,c.memo)($);function Z(){var i=(0,c.useState)(""),d=C()(i,2),n=d[0],l=d[1],e=(0,c.useCallback)(function(s){l(s)},[]),a=function(){n&&(m.add({title:n,process:0,status:"pending"}),l(""))};return(0,t.jsx)("section",{children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G,{value:n,onChange:e}),(0,t.jsx)(f,{onClick:a,text:"\u63D0\u4EA4"}),(0,t.jsxs)("div",{className:A.filterBar,children:[(0,t.jsx)(f,{type:"text",children:"\u65F6\u95F4"}),(0,t.jsx)(f,{type:"text",children:"\u5206\u7C7B"}),(0,t.jsx)(f,{type:"text",children:"\u5B8C\u6210"})]}),(0,t.jsx)("div",{className:A.listWrap,children:(0,t.jsx)(V,{})})]})})}}}]);
