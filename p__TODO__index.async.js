"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[586],{7840:function(b,j,r){r.r(j),r.d(j,{default:function(){return $}});var P=r(5574),C=r.n(P),B={input:"input___Vca9h"},t=r(5893);function G(i){var d=i.value,a=i.onChange,l=i.placeholder,e=function(s){a&&a(s.target.value)};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("input",{value:d,onChange:e,className:B.input,placeholder:l})})}var c=r(7294),v={wrap:"wrap____RwWd",outer:"outer___zXLOF",inner:"inner___FI5aq",process:"process___e28mm"},h=100,x=0;function L(i){var d=i.value,a=(0,c.useMemo)(function(){var s=d;s=Math.min(s,h),s=Math.max(s,x);var o=s+"%";return[{width:o},o]},[d]),l=C()(a,2),e=l[0],n=l[1];return(0,t.jsxs)("div",{className:v.wrap,children:[(0,t.jsx)("div",{className:v.outer,children:(0,t.jsx)("div",{className:v.inner,style:e})}),(0,t.jsx)("div",{className:v.process,children:n})]})}var F=r(7484),E=r.n(F),u={listWrap:"listWrap___ZXSDc",wrap:"wrap___wt1MK",item:"item___eA0OK",header:"header___DbH8D",title:"title___iNPeL",plus:"plus___QcRXT",close:"close___PDYJM",process:"process___PNO4c",status:"status___IxI10"},W=r(1039),R=r(7857),N=r.n(R),U=r(2444),y=r.n(U),X=r(2004),S=r.n(X),Y=r(1996),T=r.n(Y),K=r(6037),g=r.n(K),p={PNEDING:"pending",ONGOING:"Ongoing",SUCCESS:"success"},k=r(5098),M=r.n(k),z=r(9783),D=r.n(z),I=r(9520),Q=function(i){T()(a,i);var d=g()(a);function a(l,e,n){var s;return y()(this,a),s=d.call(this,l),D()(M()(s),"items",void 0),D()(M()(s),"db",void 0),s.db=new I.default(l),s.db.version(e).stores(n),s}return S()(a,[{key:"add",value:function(e){return e.createGMT=new Date().getTime(),this.db.items.add(e)}},{key:"queryAll",value:function(){return this.db.items.toArray()}},{key:"query",value:function(e,n){return n?this.db.items.where(e).between(n).toArray():this.db.items.where(e).toArray()}},{key:"update",value:function(e,n){this.db.items.update(e,n)}},{key:"deleteItem",value:function(e){return this.db.items.delete(e)}}]),a}(I.default),J=function(i){T()(a,i);var d=g()(a);function a(l,e,n){return y()(this,a),d.call(this,l,e,n)}return S()(a,[{key:"updateProcess",value:function(e,n){var s=n.process,o=p.PNEDING;s>=h?o=p.SUCCESS:s>x&&(o=p.ONGOING),this.update(e,N()(N()({},n),{},{status:o}))}}]),a}(Q),m=new J("todoList",1,{items:"++id,title,createGMT,process,status"});function H(){var i=(0,W.useLiveQuery)(function(){return m.queryAll()})||[],d=function(n){return E()(n).format("YYYY-MM-DD hh:mm:ss")},a=function(n,s){s+=10,s=Math.min(h,s),s=Math.max(x,s),m.updateProcess(n,{process:s})},l=function(n){m.deleteItem(n)};return(0,t.jsx)("div",{className:u.listWrap,children:(0,t.jsx)("ul",{className:u.wrap,children:i.length?i.map(function(e){return(0,t.jsxs)("li",{className:u.item,children:[(0,t.jsxs)("div",{className:u.header,children:[(0,t.jsxs)("div",{className:u.title,children:[e.title,e.process!==h?(0,t.jsx)("i",{className:u.plus,onClick:function(){return a(e.id,e.process)},children:"\u8FDB\u5EA6+10"}):null]}),(0,t.jsx)("div",{className:u.close,onClick:function(){return l(e.id)},children:"X"})]}),(0,t.jsx)("div",{className:u.process,children:(0,t.jsx)(L,{value:e.process})}),(0,t.jsxs)("div",{className:u.status,children:[(0,t.jsx)("div",{children:e.status}),(0,t.jsx)("div",{children:d(e.createGMT)})]})]},e.id)}):"null"})})}var V=(0,c.memo)(H),A={todo:"todo___usbec",listWrap:"listWrap___ygpcp",filterBar:"filterBar___vijkq"},O={wrap:"wrap___KPKUv",text:"text___RJQ5y"};function Z(i){var d=i.text,a=i.onClick,l=i.children,e=i.type,n=e===void 0?"button":e,s=function(){a&&a()},o=l||d;return(0,t.jsx)(t.Fragment,{children:n==="text"?(0,t.jsx)("span",{className:O.text,onClick:a,children:o}):(0,t.jsx)("button",{className:O.wrap,onClick:a,children:o})})}var f=(0,c.memo)(Z);function $(){var i=(0,c.useState)(""),d=C()(i,2),a=d[0],l=d[1],e=(0,c.useCallback)(function(s){l(s)},[]),n=function(){a&&(m.add({title:a,process:0,status:"pending"}),l(""))};return(0,t.jsxs)("section",{className:A.todo,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(G,{value:a,onChange:e}),(0,t.jsx)(f,{onClick:n,text:"\u63D0\u4EA4"})]}),(0,t.jsxs)("div",{className:A.filterBar,children:[(0,t.jsx)(f,{type:"text",children:"\u65F6\u95F4"}),(0,t.jsx)(f,{type:"text",children:"\u5206\u7C7B"}),(0,t.jsx)(f,{type:"text",children:"\u5B8C\u6210"})]}),(0,t.jsx)(V,{})]})}}}]);
